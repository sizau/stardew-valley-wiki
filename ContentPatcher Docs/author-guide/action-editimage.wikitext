{{模组:Content Patcher/header}}

带有 '''<code>&quot;Action&quot;: &quot;EditImage&quot;</code>''' 的补丁可以更改游戏已加载的图像的一部分。多个内容包可以编辑同一素材。您可以使用补丁向下延伸图像（Content Patcher 会自动扩大图像以适应新图像）。

== 用法 ==

=== 格式 ===

一个 <code>EditImage</code> 补丁由 <code>Changes</code>（请参阅下文[[#示例|示例]]）下的一个模型组成，包含以下字段。

<dl>
<dt>
必填字段：
</dt>
<dd>
{| class="wikitable"
|-
! 字段
! 用途
|-
| <code>Action</code>
| 要进行的更改类型。此操作类型设置为 <code>EditImage</code>。
|-
| <code>Target</code>
| 要修改的目标[[模组:Content Patcher 制作指南#什么是素材？|游戏素材名称]]（或多个由逗号分隔的素材名），例如 <code>Portraits/Abigail</code>。该字段支持[[模组:Content Patcher 制作指南#Tokens 和条件|令牌]]，不区分大小写。
|-
| <code>FromFile</code>
| 内容包文件夹中用于修补到目标中的文件的相对路径（例如 <code>assets/dinosaur.png</code>），或多个逗号分隔的路径。这可以是 <code>.png</code> 或 <code>.xnb</code> 文件。该字段支持[[模组:Content Patcher 制作指南#Tokens 和条件|令牌]]，不区分大小写。
|}

</dd>
<dt>
可选字段：
</dt>
<dd>
{| class="wikitable"
|-
! 字段
! 用途
|-
| <code>FromArea</code>
|
|-
| <code>ToArea</code>
|
|-
| <code>PatchMode</code>
|
|-
| <code>When</code>
| （可选）仅在给定的[[模组:Content Patcher 制作指南#Tokens 和条件|条件]]匹配时应用这个内容补丁。
|-
| <code>LogName</code>
| （可选）在日志中显示的补丁名称。这有助于查找错误。如果省略，则默认为类似 <code>EditImage Animals/Dinosaur</code> 的名字。
|-
| <code>Update</code>
| （可选）补丁字段的更新频率。请参阅[[模组:Content Patcher 制作指南#补丁更新频率|补丁更新频率]]。
|-
| <code>LocalTokens</code>
| （可选）一组仅在此补丁中生效的[[模组:Content Patcher 制作指南/令牌#局部令牌|局部令牌]]。
|}

</dd>
<dt>
进阶字段：
</dt>
<dd>
{| class="wikitable"
|-
!字段
!用途
|-
|<code>Priority</code>
|（可选）当多个补丁编辑同一数据素材时，此字段控制它们应用的顺序。可用的值有 <code>Early</code>（更早），<code>Default</code>（默认），还有 <code>Late</code>（更晚）。默认值为 <code>Default</code>。

补丁（包括所有模组）按以下顺序生效：

# 优先级从早到晚；
# 按照模组加载顺序（基于依赖关系等因素）；
# 按照补丁在 <code>content.json</code> 中列出的顺序。

如果需要更具体的顺序，可以使用简单的偏移量，如 <code>&quot;Default + 2&quot;</code> 或者 <code>&quot;Late - 10&quot;</code>。默认值为 -1000（<code>Early</code>），0（<code>Default</code>）和 1000（<code>Late</code>）。

此字段'''不支持'''令牌，不区分大小写。

{{Alert|Caution|优先级会让您的更改难以排除故障。推荐做法：
* 如果可以的话，只使用上述无偏移的优先级（例如外观覆盖设为 <code>Late</code>）
* 不需要为您自己的补丁设置优先级，因为您可以自己在 content.json 排列好补丁应用的顺序。|警告}}
|-
|{{M|<code>TargetLocale</code>}}
|（可选）素材名称中要匹配的地区代码，例如设置 <code>&quot;TargetLocale&quot;: &quot;fr-FR&quot;</code> 将会只编辑法语的素材（例如 <code>Data/Achievements.fr-FR</code>）。可以为空，只有只编辑没有地域区分的基本素材。

如果省略，则将应用于所有素材，不论其是否存在本地化。
|}
</dd>
</dl>
=== 示例 ===

这个示例改变某一物品的图标：

<syntaxhighlight lang="js">{
    "Format": "2.7.0",
    "Changes": [
        {
            "Action": "EditImage",
            "Target": "Maps/springobjects",
            "FromFile": "assets/fish-object.png",
            "FromArea": { "X": 0, "Y": 0, "Width": 16, "Height": 16 }, // 可选，默认整个图片
            "ToArea": { "X": 256, "Y": 96, "Width": 16, "Height": 16 } // 可选，默认与 FromArea 大小相同
        },
    ]
}</syntaxhighlight>
== 参见 ==

* 其他操作和选项请参见[[模组:Content Patcher 制作指南|模组作者指南]]。
